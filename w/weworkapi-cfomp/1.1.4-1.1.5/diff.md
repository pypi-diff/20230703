# Comparing `tmp/weworkapi_cfomp-1.1.4-py3-none-any.whl.zip` & `tmp/weworkapi_cfomp-1.1.5-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,21 +1,21 @@
-Zip file size: 19049 bytes, number of entries: 19
--rw-r--r--  2.0 unx    10387 b- defN 21-May-20 08:38 wework_callback/WXBizMsgCrypt3.py
--rw-r--r--  2.0 unx        0 b- defN 21-May-20 08:38 wework_callback/__init__.py
--rw-r--r--  2.0 unx      796 b- defN 21-May-20 08:38 wework_callback/ierror.py
--rw-r--r--  2.0 unx     6320 b- defN 21-May-20 08:38 wework_callback_json/Sample.py
--rw-r--r--  2.0 unx    10429 b- defN 21-May-20 08:38 wework_callback_json/WXBizJsonMsgCrypt.py
--rw-r--r--  2.0 unx        0 b- defN 21-May-20 08:38 wework_callback_json/__init__.py
--rw-r--r--  2.0 unx      798 b- defN 21-May-20 08:38 wework_callback_json/ierror.py
--rw-r--r--  2.0 unx        0 b- defN 21-Jun-09 05:15 wework_sendmsg/__init__.py
--rw-r--r--  2.0 unx     3171 b- defN 21-Jun-25 07:59 wework_sendmsg/sendmsg.py
--rw-r--r--  2.0 unx     3950 b- defN 21-May-20 08:38 weworkapi/AbstractApi.py
--rw-r--r--  2.0 unx     5498 b- defN 21-May-20 08:38 weworkapi/CorpApi.py
--rw-r--r--  2.0 unx     2895 b- defN 21-May-20 08:38 weworkapi/ServiceCorpApi.py
--rw-r--r--  2.0 unx     1652 b- defN 21-May-20 08:38 weworkapi/ServiceProviderApi.py
--rw-r--r--  2.0 unx        0 b- defN 21-May-20 08:38 weworkapi/__init__.py
--rw-r--r--  2.0 unx      805 b- defN 21-Jul-01 09:23 weworkapi_cfomp-1.1.4.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 21-Jul-01 09:23 weworkapi_cfomp-1.1.4.dist-info/WHEEL
--rw-r--r--  2.0 unx       64 b- defN 21-Jul-01 09:23 weworkapi_cfomp-1.1.4.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       62 b- defN 21-Jul-01 09:23 weworkapi_cfomp-1.1.4.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     1610 b- defN 21-Jul-01 09:23 weworkapi_cfomp-1.1.4.dist-info/RECORD
-19 files, 48529 bytes uncompressed, 16383 bytes compressed:  66.2%
+Zip file size: 19030 bytes, number of entries: 19
+-rw-r--r--  2.0 unx    10387 b- defN 23-Jun-30 06:09 wework_callback/WXBizMsgCrypt3.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-30 06:09 wework_callback/__init__.py
+-rw-r--r--  2.0 unx      796 b- defN 23-Jun-30 06:09 wework_callback/ierror.py
+-rw-r--r--  2.0 unx     6320 b- defN 23-Jun-30 06:09 wework_callback_json/Sample.py
+-rw-r--r--  2.0 unx    10429 b- defN 23-Jun-30 06:09 wework_callback_json/WXBizJsonMsgCrypt.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-30 06:09 wework_callback_json/__init__.py
+-rw-r--r--  2.0 unx      798 b- defN 23-Jun-30 06:09 wework_callback_json/ierror.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-30 06:09 wework_sendmsg/__init__.py
+-rw-r--r--  2.0 unx     3282 b- defN 23-Jun-30 09:02 wework_sendmsg/sendmsg.py
+-rw-r--r--  2.0 unx     3950 b- defN 23-Jun-30 06:09 weworkapi/AbstractApi.py
+-rw-r--r--  2.0 unx     5498 b- defN 23-Jun-30 06:09 weworkapi/CorpApi.py
+-rw-r--r--  2.0 unx     2895 b- defN 23-Jun-30 06:09 weworkapi/ServiceCorpApi.py
+-rw-r--r--  2.0 unx     1652 b- defN 23-Jun-30 06:09 weworkapi/ServiceProviderApi.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-30 06:09 weworkapi/__init__.py
+-rw-r--r--  2.0 unx      750 b- defN 23-Jul-03 06:32 weworkapi_cfomp-1.1.5.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-03 06:32 weworkapi_cfomp-1.1.5.dist-info/WHEEL
+-rw-r--r--  2.0 unx       63 b- defN 23-Jul-03 06:32 weworkapi_cfomp-1.1.5.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       62 b- defN 23-Jul-03 06:32 weworkapi_cfomp-1.1.5.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     1610 b- defN 23-Jul-03 06:32 weworkapi_cfomp-1.1.5.dist-info/RECORD
+19 files, 48584 bytes uncompressed, 16364 bytes compressed:  66.3%
```

## zipnote {}

```diff
@@ -36,23 +36,23 @@
 
 Filename: weworkapi/ServiceProviderApi.py
 Comment: 
 
 Filename: weworkapi/__init__.py
 Comment: 
 
-Filename: weworkapi_cfomp-1.1.4.dist-info/METADATA
+Filename: weworkapi_cfomp-1.1.5.dist-info/METADATA
 Comment: 
 
-Filename: weworkapi_cfomp-1.1.4.dist-info/WHEEL
+Filename: weworkapi_cfomp-1.1.5.dist-info/WHEEL
 Comment: 
 
-Filename: weworkapi_cfomp-1.1.4.dist-info/entry_points.txt
+Filename: weworkapi_cfomp-1.1.5.dist-info/entry_points.txt
 Comment: 
 
-Filename: weworkapi_cfomp-1.1.4.dist-info/top_level.txt
+Filename: weworkapi_cfomp-1.1.5.dist-info/top_level.txt
 Comment: 
 
-Filename: weworkapi_cfomp-1.1.4.dist-info/RECORD
+Filename: weworkapi_cfomp-1.1.5.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## wework_sendmsg/sendmsg.py

```diff
@@ -5,17 +5,16 @@
 import yaml
 from flatten_dict import unflatten
 from dict_recursive_update import recursive_update
 from weworkapi.CorpApi import CorpApi, CORP_API_TYPE
 
 
 def merge_message_argfields(message, fields):
-
     # transform -a'touser=xxx agentid=xxx' to [touser=xxx, argentid=xxx]
-    fields = [ fld.split() for fld in fields]
+    fields = [fld.split() for fld in fields]
 
     # flatten the fields list,
     # [[touser=xxx, agentid=xxx], msgtype=text] -> [touser=xxx, agentid=xxx, msgtype=text]
     fields = list(chain(*fields))
 
     # convert the k=v list to dict
     flat_dict = dict([tuple(fld.split(sep='=', maxsplit=1)) for fld in fields])
@@ -24,32 +23,18 @@
     # ie. {'event.task_id': 'xxx'} -> {'event': {'task_id': xxx}}
     unflat = unflatten(flat_dict, splitter='dot')
 
     # recursive update the message dict with the unflatten arg fiedls
     return recursive_update(message, unflat)
 
 
-def main():
-
-    parser = argparse.ArgumentParser()
-    parser.add_argument('-c', '--corpid', required=True, help='企业微信的企业ID')
-    parser.add_argument('-s', '--secret', required=True, help='企业微信内应用的Secret')
-    parser.add_argument('-t', '--token_cache', help='access_token的本地缓存文件')
-    parser.add_argument('-a', '--field', action='append',
-                        help='消息体字段，格式为K=V，添加或覆盖参数message中字段的值，例如 touser=xxx, interactive_taskcard.task_id=xxx')
-    parser.add_argument(
-        '-f', '--format', choices=['json', 'yaml'], default='json', help='参数message文本的格式')
-    parser.add_argument('-m', '--message', help='向企业微信应用发送的消息文本')
-    parser.add_argument('-l', '--level', choices=['DEBUG', 'INFO', 'WARNING',
-                        'ERROR', 'FATAL', 'CRITICAL'], default='INFO', help='logging level')
-
-    args = parser.parse_args()
+def sendmsg(args):
     logging.basicConfig(level=getattr(logging, args.level))
     logging.debug(args)
-  
+
     message = dict()
     if args.format == 'json':
         message = json.loads(args.message)
     elif args.format == 'yaml':
         message = yaml.safe_load(args.message)
     message = merge_message_argfields(message, args.field)
 
@@ -75,9 +60,39 @@
             with open(args.token_cache, mode='w', encoding='utf-8') as f:
                 f.write(corpapi.access_token)
             logging.info(f'Update {args.token_cache} with new refresh token')
         except Exception as e:
             logging.error(e)
 
 
+def main():
+    parser = argparse.ArgumentParser()
+    parser.add_argument('-c', '--corpid', required=True, help='企业微信的企业ID')
+    parser.add_argument('-s', '--secret', required=True, help='企业微信内应用的Secret')
+    parser.add_argument('-t', '--token_cache', help='access_token的本地缓存文件')
+    parser.add_argument('-m', '--message', help='向企业微信应用发送的消息文本')
+    parser.add_argument(
+        '-a',
+        '--field',
+        action='append',
+        help='消息体字段，格式为K=V，添加或覆盖参数message中字段的值，'
+             '例如 touser=xxx, interactive_taskcard.task_id=xxx'
+    )
+    parser.add_argument(
+        '-f',
+        '--format',
+        choices=['json', 'yaml'],
+        default='json',
+        help='参数message文本的格式'
+    )
+    parser.add_argument(
+        '-l',
+        '--level',
+        choices=['DEBUG', 'INFO', 'WARNING', 'ERROR', 'FATAL', 'CRITICAL'],
+        default='INFO',
+        help='logging level'
+    )
+    sendmsg(args=parser.parse_args())
+
+
 if __name__ == '__main__':
     main()
```

## Comparing `weworkapi_cfomp-1.1.4.dist-info/METADATA` & `weworkapi_cfomp-1.1.5.dist-info/METADATA`

 * *Files 6% similar despite different names*

```diff
@@ -1,24 +1,20 @@
 Metadata-Version: 2.1
 Name: weworkapi-cfomp
-Version: 1.1.4
+Version: 1.1.5
 Summary: wework server side api
-Home-page: UNKNOWN
 Author: chenhp
 Author-email: chenhp@shchinafortune.com
-License: UNKNOWN
-Platform: UNKNOWN
 Requires-Dist: requests
 Requires-Dist: pycryptodome
 Requires-Dist: PyYAML
 Requires-Dist: flatten-dict
 Requires-Dist: dict-recursive-update
 
 # 简介
   企业微信服务端API，运管平台依据 https://github.com/sbzhu/weworkapi_python.git 改写成python3版本
   企业微信服务端API文档地址 https://work.weixin.qq.com/api/doc/90000/90135/90664
 
 
   运管平台目前和企业微信的集成主机在以下两个应用场景：
   1. 发送应用消息， https://work.weixin.qq.com/api/doc/90000/90135/90236
   2. 接收消息与事件， https://work.weixin.qq.com/api/doc/90000/90135/90237
-
```

## Comparing `weworkapi_cfomp-1.1.4.dist-info/RECORD` & `weworkapi_cfomp-1.1.5.dist-info/RECORD`

 * *Files 14% similar despite different names*

```diff
@@ -2,18 +2,18 @@
 wework_callback/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 wework_callback/ierror.py,sha256=khOsBiajB8u46YEqrj97Trr2CSXEUM1aQISUEzRWwIc,796
 wework_callback_json/Sample.py,sha256=ZWMVW_ZZLeiNhcNW7awNZe3Rj54-EMQP3JpjDHegIdo,6320
 wework_callback_json/WXBizJsonMsgCrypt.py,sha256=UbBjIfrW-KZlR19oPvOIfmEy6E0hRmymuC2m5vMHMNU,10429
 wework_callback_json/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 wework_callback_json/ierror.py,sha256=MNsJ1Ew5noaZ9UPEslJB9-1YkWeN0c0KOVyxQg8uS0U,798
 wework_sendmsg/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-wework_sendmsg/sendmsg.py,sha256=Yl5fgohUtD0Z4WtaFgBavqGIG-riq5s_ch7JKmHQtFU,3171
+wework_sendmsg/sendmsg.py,sha256=IDeE6t-tpHaU61bsT7TQVhGRSps9E_ZU8JNSYOGW4No,3282
 weworkapi/AbstractApi.py,sha256=-7MkHGyEQ0BZbcn4KUVARqEJj5ZrtE7EEStZVU_TMro,3950
 weworkapi/CorpApi.py,sha256=ykiICP0cPRHAVZ-GBXTfGTq1yDvG5Lhz81KhST6oNJs,5498
 weworkapi/ServiceCorpApi.py,sha256=XvXbfweTtZm2I7yVx-rdRj-tBshZX0pkHKj45Xv7LSA,2895
 weworkapi/ServiceProviderApi.py,sha256=raJnCBFHlnBshJny_YIaNie3SM7njJupsRz80-nR0_w,1652
 weworkapi/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-weworkapi_cfomp-1.1.4.dist-info/METADATA,sha256=ln40gpCv13qHHBtcxXWj2-TmP7NmnVWFSs2047T08QI,805
-weworkapi_cfomp-1.1.4.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
-weworkapi_cfomp-1.1.4.dist-info/entry_points.txt,sha256=HZ1vg_Y70Db65699g0tSYsq1YVai_ujikYBwbbPLSww,64
-weworkapi_cfomp-1.1.4.dist-info/top_level.txt,sha256=5fNrbg66jVHBOro1AMDAKCkhDKPS1Sn5hHzQp8bEXpk,62
-weworkapi_cfomp-1.1.4.dist-info/RECORD,,
+weworkapi_cfomp-1.1.5.dist-info/METADATA,sha256=BS4C9XlO8Pw1vXCmKBm3pt8PltzZKJnHlnl2LP9C43w,750
+weworkapi_cfomp-1.1.5.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+weworkapi_cfomp-1.1.5.dist-info/entry_points.txt,sha256=9spK9Q5VAxLlH4GajHEcoujaZyj5VLD9mi1_ogpZmV0,63
+weworkapi_cfomp-1.1.5.dist-info/top_level.txt,sha256=5fNrbg66jVHBOro1AMDAKCkhDKPS1Sn5hHzQp8bEXpk,62
+weworkapi_cfomp-1.1.5.dist-info/RECORD,,
```

