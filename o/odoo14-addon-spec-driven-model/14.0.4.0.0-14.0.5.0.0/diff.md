# Comparing `tmp/odoo14_addon_spec_driven_model-14.0.4.0.0-py3-none-any.whl.zip` & `tmp/odoo14_addon_spec_driven_model-14.0.5.0.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,35 +1,35 @@
-Zip file size: 56583 bytes, number of entries: 33
--rw-r--r--  2.0 unx     7608 b- defN 23-May-11 00:16 odoo/addons/spec_driven_model/README.rst
--rw-r--r--  2.0 unx       21 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/__init__.py
--rw-r--r--  2.0 unx      504 b- defN 23-May-11 00:16 odoo/addons/spec_driven_model/__manifest__.py
--rw-r--r--  2.0 unx     6146 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/hooks.py
--rw-r--r--  2.0 unx     1378 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/i18n/pt_BR.po
--rw-r--r--  2.0 unx     1103 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/i18n/spec_driven_model.pot
--rw-r--r--  2.0 unx      130 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/models/__init__.py
--rw-r--r--  2.0 unx     9551 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/models/spec_export.py
--rw-r--r--  2.0 unx    12090 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/models/spec_import.py
--rw-r--r--  2.0 unx     1051 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/models/spec_mixin.py
--rw-r--r--  2.0 unx    14407 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/models/spec_models.py
--rw-r--r--  2.0 unx    13996 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/models/spec_view.py
--rw-r--r--  2.0 unx        0 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      191 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx     4284 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx        0 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/readme/HISTORY.rst
--rw-r--r--  2.0 unx        0 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/readme/INSTALL.rst
--rw-r--r--  2.0 unx       77 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/readme/ROADMAP.rst
--rw-r--r--  2.0 unx      240 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/static/description/icon.png
--rw-r--r--  2.0 unx    17610 b- defN 23-May-11 00:16 odoo/addons/spec_driven_model/static/description/index.html
--rw-r--r--  2.0 unx     2466 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/tests/PurchaseOrderSchema.xsd
--rw-r--r--  2.0 unx       30 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/tests/__init__.py
--rw-r--r--  2.0 unx     1146 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/tests/fake_mixin.py
--rw-r--r--  2.0 unx     2535 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/tests/fake_odoo_purchase.py
--rw-r--r--  2.0 unx     7419 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/tests/purchase_order_lib.py
--rw-r--r--  2.0 unx     3805 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/tests/spec_poxsd.py
--rw-r--r--  2.0 unx     2260 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/tests/spec_purchase.py
--rw-r--r--  2.0 unx     5325 b- defN 23-May-11 00:15 odoo/addons/spec_driven_model/tests/test_spec_model.py
--rw-r--r--  2.0 unx     8234 b- defN 23-May-11 00:18 odoo14_addon_spec_driven_model-14.0.4.0.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-11 00:18 odoo14_addon_spec_driven_model-14.0.4.0.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-May-11 00:18 odoo14_addon_spec_driven_model-14.0.4.0.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3495 b- defN 23-May-11 00:18 odoo14_addon_spec_driven_model-14.0.4.0.0.dist-info/RECORD
-33 files, 136654 bytes uncompressed, 50677 bytes compressed:  62.9%
+Zip file size: 56073 bytes, number of entries: 33
+-rw-r--r--  2.0 unx     7608 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/__init__.py
+-rw-r--r--  2.0 unx      504 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/__manifest__.py
+-rw-r--r--  2.0 unx     6146 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/hooks.py
+-rw-r--r--  2.0 unx     1378 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/i18n/pt_BR.po
+-rw-r--r--  2.0 unx     1103 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/i18n/spec_driven_model.pot
+-rw-r--r--  2.0 unx      130 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/models/__init__.py
+-rw-r--r--  2.0 unx    10281 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/models/spec_export.py
+-rw-r--r--  2.0 unx    13384 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/models/spec_import.py
+-rw-r--r--  2.0 unx     1051 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/models/spec_mixin.py
+-rw-r--r--  2.0 unx    14407 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/models/spec_models.py
+-rw-r--r--  2.0 unx    13996 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/models/spec_view.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx      191 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx     4284 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/readme/HISTORY.rst
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/readme/INSTALL.rst
+-rw-r--r--  2.0 unx       77 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx      240 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/readme/USAGE.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/static/description/icon.png
+-rw-r--r--  2.0 unx    17610 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/static/description/index.html
+-rw-r--r--  2.0 unx     2466 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/tests/PurchaseOrderSchema.xsd
+-rw-r--r--  2.0 unx       30 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/tests/__init__.py
+-rw-r--r--  2.0 unx     1146 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/tests/fake_mixin.py
+-rw-r--r--  2.0 unx     2535 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/tests/fake_odoo_purchase.py
+-rw-r--r--  2.0 unx     5391 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/tests/purchase_order_lib.py
+-rw-r--r--  2.0 unx     3704 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/tests/spec_poxsd.py
+-rw-r--r--  2.0 unx     2268 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/tests/spec_purchase.py
+-rw-r--r--  2.0 unx     5383 b- defN 23-Jul-03 21:15 odoo/addons/spec_driven_model/tests/test_spec_model.py
+-rw-r--r--  2.0 unx     8234 b- defN 23-Jul-03 21:15 odoo14_addon_spec_driven_model-14.0.5.0.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-03 21:15 odoo14_addon_spec_driven_model-14.0.5.0.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jul-03 21:15 odoo14_addon_spec_driven_model-14.0.5.0.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3496 b- defN 23-Jul-03 21:15 odoo14_addon_spec_driven_model-14.0.5.0.0.dist-info/RECORD
+33 files, 136616 bytes uncompressed, 50167 bytes compressed:  63.3%
```

## zipnote {}

```diff
@@ -81,20 +81,20 @@
 
 Filename: odoo/addons/spec_driven_model/tests/spec_purchase.py
 Comment: 
 
 Filename: odoo/addons/spec_driven_model/tests/test_spec_model.py
 Comment: 
 
-Filename: odoo14_addon_spec_driven_model-14.0.4.0.0.dist-info/METADATA
+Filename: odoo14_addon_spec_driven_model-14.0.5.0.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_spec_driven_model-14.0.4.0.0.dist-info/WHEEL
+Filename: odoo14_addon_spec_driven_model-14.0.5.0.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_spec_driven_model-14.0.4.0.0.dist-info/top_level.txt
+Filename: odoo14_addon_spec_driven_model-14.0.5.0.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_spec_driven_model-14.0.4.0.0.dist-info/RECORD
+Filename: odoo14_addon_spec_driven_model-14.0.5.0.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/spec_driven_model/__manifest__.py

```diff
@@ -1,15 +1,15 @@
 # Copyright 2019 Akretion
 # License LGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
 {
     "name": "Spec Driven Model",
     "summary": """
         Tools for specifications driven mixins (from xsd for instance)""",
-    "version": "14.0.4.0.0",
+    "version": "14.0.5.0.0",
     "maintainers": ["rvalyi"],
     "license": "LGPL-3",
     "author": "Akretion,Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/l10n-brazil",
     "depends": [],
     "data": [],
     "demo": [],
```

## odoo/addons/spec_driven_model/models/spec_export.py

```diff
@@ -11,15 +11,17 @@
 
 class AbstractSpecMixin(models.AbstractModel):
     _inherit = "spec.mixin"
 
     @api.model
     def _get_binding_class(self, class_obj):
         binding_module = sys.modules[self._binding_module]
-        return getattr(binding_module, class_obj._generateds_type)
+        for attr in class_obj._binding_type.split("."):
+            binding_module = getattr(binding_module, attr)
+        return binding_module
 
     @api.model
     def _get_model_classes(self):
         classes = [getattr(x, "_name", None) for x in type(self).mro()]
         return classes
 
     @api.model
@@ -49,28 +51,28 @@
             0,
             pretty_print=True,
         )
         output.close()
 
     def _export_fields(self, xsd_fields, class_obj, export_dict):
         """
-        Iterates over the record fields and map them in an dict of values
+        Iterate over the record fields and map them in an dict of values
         that will later be injected as **kwargs in the proper XML Python
         binding constructors. Hence the value can either be simple values or
         sub binding instances already properly instanciated.
 
         This method implements a dynamic dispatch checking if there is any
         method called _export_fields_CLASS_NAME to update the xsd_fields
         and export_dict variables, this way we allow controlling the
         flow of fields to export or injecting specific values ​​in the
         field export.
         """
         self.ensure_one()
         binding_class = self._get_binding_class(class_obj)
-        binding_class_spec = {i.name: i for i in binding_class.member_data_items_}
+        binding_class_spec = binding_class.__dataclass_fields__
 
         class_name = class_obj._name.replace(".", "_")
         export_method_name = "_export_fields_%s" % class_name
         if hasattr(self, export_method_name):
             xsd_fields = [i for i in xsd_fields]
             export_method = getattr(self, export_method_name)
             export_method(xsd_fields, class_obj, export_dict)
@@ -79,40 +81,50 @@
             if not xsd_field:
                 continue
             if (
                 not self._fields.get(xsd_field)
             ) and xsd_field not in self._stacking_points.keys():
                 continue
             field_spec_name = xsd_field.replace(class_obj._field_prefix, "")
+            field_spec = False
+            for fname, fspec in binding_class_spec.items():
+                if fspec.metadata.get("name", {}) == field_spec_name:
+                    field_spec_name = fname
+                if field_spec_name == fname:
+                    field_spec = fspec
+            if field_spec and not field_spec.init:
+                # case of xsd fixed values, we should not try to write them
+                continue
+
             if not binding_class_spec.get(field_spec_name):
                 # this can happen with a o2m generated foreign key for instance
                 continue
-            member_spec = binding_class_spec[field_spec_name]
+            field_spec = binding_class_spec[field_spec_name]
             field_data = self._export_field(
-                xsd_field, class_obj, member_spec, export_dict.get(field_spec_name)
+                xsd_field, class_obj, field_spec, export_dict.get(field_spec_name)
             )
             if xsd_field in self._stacking_points.keys():
                 if not field_data:
                     # stacked nested tags are skipped if empty
                     continue
             elif not self[xsd_field] and not field_data:
                 continue
 
             export_dict[field_spec_name] = field_data
 
-    def _export_field(self, xsd_field, class_obj, member_spec, export_value=None):
+    def _export_field(self, xsd_field, class_obj, field_spec, export_value=None):
         """
-        Maps a single Odoo field to a python binding value according to the
+        Map a single Odoo field to a python binding value according to the
         kind of field.
         """
         self.ensure_one()
         # TODO: Export number required fields with Zero.
         field = class_obj._fields.get(xsd_field, self._stacking_points.get(xsd_field))
         xsd_required = field.xsd_required if hasattr(field, "xsd_required") else None
-
+        xsd_type = field.xsd_type if hasattr(field, "xsd_type") else None
         if field.type == "many2one":
             if (not self._stacking_points.get(xsd_field)) and (
                 not self[xsd_field] and not xsd_required
             ):
                 if field.comodel_name not in self._get_spec_classes():
                     return False
             if hasattr(field, "xsd_choice_required"):
@@ -131,15 +143,15 @@
         elif (
             self._fields[xsd_field].type in ("float", "monetary")
             and self[xsd_field] is not False
         ):
             if hasattr(field, "xsd_choice_required"):
                 xsd_required = True  # NOTE compat, see previous NOTE
             return self._export_float_monetary(
-                xsd_field, member_spec, class_obj, xsd_required, export_value
+                xsd_field, xsd_type, class_obj, xsd_required, export_value
             )
         elif type(self[xsd_field]) == str:
             return self[xsd_field].strip()
         else:
             return self[xsd_field]
 
     def _export_many2one(self, field_name, xsd_required, class_obj=None):
@@ -160,27 +172,27 @@
             field_data = relational_field._build_generateds(
                 class_obj._fields[field_name].comodel_name
             )
             relational_data.append(field_data)
         return relational_data
 
     def _export_float_monetary(
-        self, field_name, member_spec, class_obj, xsd_required, export_value=None
+        self, field_name, xsd_type, class_obj, xsd_required, export_value=None
     ):
         self.ensure_one()
         field_data = export_value or self[field_name]
         # TODO check xsd_required for all fields to export?
         if not field_data and not xsd_required:
             return False
-        if member_spec.data_type[0]:
-            TDec = "".join(filter(lambda x: x.isdigit(), member_spec.data_type[0]))[-2:]
-            my_format = "%.{}f".format(TDec)
-            return str(my_format % field_data)
+        if xsd_type and xsd_type.startswith("TDec"):
+            tdec = "".join(filter(lambda x: x.isdigit(), xsd_type))[-2:]
         else:
-            raise NotImplementedError
+            tdec = ""
+        my_format = "%.{}f".format(tdec)
+        return str(my_format % field_data)
 
     def _export_date(self, field_name):
         self.ensure_one()
         return str(self[field_name])
 
     def _export_datetime(self, field_name):
         self.ensure_one()
@@ -188,15 +200,15 @@
             fields.Datetime.context_timestamp(
                 self, fields.Datetime.from_string(self[field_name])
             ).isoformat("T")
         )
 
     def _build_generateds(self, class_name=False):
         """
-        Iterates over an Odoo record and its m2o and o2m sub-records
+        Iterate over an Odoo record and its m2o and o2m sub-records
         using a pre-order tree traversal and maps the Odoo record values
         to  a dict of Python binding values.
 
         These values will later be injected as **kwargs in the proper XML Python
         binding constructors. Hence the value can either be simple values or
         sub binding instances already properly instanciated.
         """
@@ -216,15 +228,20 @@
             and "_choice" not in class_obj._fields[i].name
         )
 
         kwargs = {}
         binding_class = self._get_binding_class(class_obj)
         self._export_fields(xsd_fields, class_obj, export_dict=kwargs)
         if kwargs:
-            binding_instance = binding_class(**kwargs)
+            sliced_kwargs = {
+                key: kwargs.get(key)
+                for key in binding_class.__dataclass_fields__.keys()
+                if kwargs.get(key)
+            }
+            binding_instance = binding_class(**sliced_kwargs)
             return binding_instance
 
     def export_xml(self, print_xml=True):
         self.ensure_one()
         result = []
 
         if hasattr(self, "_stacked"):
```

## odoo/addons/spec_driven_model/models/spec_import.py

```diff
@@ -1,13 +1,15 @@
 # Copyright 2019-2020 Akretion - Raphael Valyi <raphael.valyi@akretion.com>
 # License LGPL-3.0 or later (https://www.gnu.org/licenses/lgpl-3.0.en.html).
 
+import inspect
 import logging
 import re
 from datetime import datetime
+from enum import Enum
 
 from odoo import api, models
 
 from .spec_models import SpecModel
 
 _logger = logging.getLogger(__name__)
 
@@ -24,15 +26,15 @@
     """
 
     _inherit = "spec.mixin"
 
     @api.model
     def build_from_binding(self, node, dry_run=False):
         """
-        Builds an instance of an Odoo Model from a pre-populated
+        Build an instance of an Odoo Model from a pre-populated
         Python binding object. Binding object such as the ones generated using
         generateDS can indeed be automatically populated from an XML file.
         This build method bridges the gap to build the Odoo object.
 
         It uses a pre-order tree traversal of the Python bindings and for each
         sub-binding (or node) it sees what is the corresponding Odoo model to map.
 
@@ -48,82 +50,92 @@
             return model.new(attrs)
         else:
             return model.create(attrs)
 
     @api.model
     def build_attrs(self, node, path="", defaults_model=None):
         """
-        Builds a new odoo model instance from a Python binding element or
+        Build a new odoo model instance from a Python binding element or
         sub-element. Iterates over the binding fields to populate the Odoo fields.
         """
         vals = {}
-        for attr in node.member_data_items_:
-            self._build_attr(node, self._fields, vals, path, attr)
+        for fname, fspec in node.__dataclass_fields__.items():
+            self._build_attr(node, self._fields, vals, path, (fname, fspec))
         vals = self._prepare_import_dict(vals, defaults_model=defaults_model)
         return vals
 
     @api.model
     def _build_attr(self, node, fields, vals, path, attr):
         """
-        Builds an Odoo field from a binding attribute.
+        Build an Odoo field from a binding attribute.
         """
-        value = getattr(node, attr.get_name())
+        value = getattr(node, attr[0])
         if value is None or value == []:
             return False
         key = "%s%s" % (
             self._field_prefix,
-            attr.get_name(),
+            attr[1].metadata.get("name", attr[0]),
         )
         child_path = "%s.%s" % (path, key)
-        binding_type = attr.get_child_attrs().get("type")
         if (
-            binding_type is None
-            or binding_type.startswith("xs:")
-            or binding_type.startswith("xsd:")
+            (
+                attr[1].type == str
+                or not any(["odoo.addons." in str(i) for i in attr[1].type.__args__])
+            )
+            and not str(attr[1].type).startswith("typing.List")
+            and "ForwardRef" not in str(attr[1].type)
         ):
             # SimpleType
-
+            if isinstance(value, Enum):
+                value = value.value
             if fields.get(key) and fields[key].type == "datetime":
                 if "T" in value:
                     if tz_datetime.match(value):
                         old_value = value
                         value = old_value[:19]
                         # TODO see python3/pysped/xml_sped/base.py#L692
                     value = datetime.strptime(value, "%Y-%m-%dT%H:%M:%S")
 
             self._build_string_not_simple_type(key, vals, value, node)
 
         else:
+            if str(attr[1].type).startswith("typing.List") or "ForwardRef" in str(
+                attr[1].type
+            ):  # o2m
+                binding_type = attr[1].type.__args__[0].__forward_arg__
+            else:
+                binding_type = attr[1].type.__args__[0].__name__
+
             # ComplexType
             if fields.get(key) and fields[key].related:
                 # example: company.nfe40_enderEmit related on partner_id
                 # then we need to set partner_id, not nfe40_enderEmit
                 key = fields[key].related[-1]  # -1 works with _inherits
                 comodel_name = fields[key].comodel_name
             else:
-                clean_type = attr.get_child_attrs()["type"].replace("Type", "").lower()
+                # clean_type = attr.get_child_attrs()["type"].replace("Type", "").lower()
+                clean_type = binding_type.lower()  # TODO double check
                 comodel_name = "%s.%s.%s" % (
                     self._schema_name,
                     self._schema_version.replace(".", "")[0:2],
-                    clean_type,
+                    clean_type.split(".")[-1],
                 )
 
             comodel = self.get_concrete_model(comodel_name)
             if comodel is None:  # example skip ICMS100 class
                 return
-
-            if attr.get_container() == 0:
+            if not str(attr[1].type).startswith("typing.List"):
                 # m2o
                 new_value = comodel.build_attrs(value, path=child_path)
                 child_defaults = self._extract_related_values(vals, key)
 
                 new_value.update(child_defaults)
                 # FIXME comodel._build_many2one
                 self._build_many2one(comodel, vals, new_value, key, value, child_path)
-            elif attr.get_container() == 1:
+            else:
                 # o2m
                 lines = []
                 for line in [li for li in value if li]:
                     line_vals = comodel.build_attrs(
                         line, path=child_path, defaults_model=comodel
                     )
                     lines.append((0, 0, line_vals))
@@ -228,15 +240,14 @@
                     for f, v in defaults_model._fields.items()
                     if v.type not in ["binary", "integer", "float", "monetary"]
                     and v.name not in vals.keys()
                 ]
             )
             vals.update(defaults)
             # NOTE: also eventually load default values from the context?
-
         return vals
 
     @api.model
     def _verify_related_many2ones(self, related_many2ones):
         return related_many2ones
 
     @api.model
@@ -292,15 +303,29 @@
         else:
             rec_id = self.match_record(rec_dict, parent_dict, model)
         if not rec_id:
             vals = self._prepare_import_dict(
                 rec_dict, model=model, parent_dict=parent_dict, defaults_model=model
             )
             if self._context.get("dry_run"):
-                rec_id = model.new(vals).id
+                rec = model.new(vals)
+                rec_id = rec.id
+                # at this point for NewId records, some fields
+                # may need to be set calling the inverse field functions:
+                for fname in vals:
+                    field = model._fields.get(fname)
+                    if isinstance(field.inverse, str):
+                        getattr(rec, field.inverse)()
+                        rec.write(vals)  # ensure vals values aren't overriden
+                    elif (
+                        field.inverse
+                        and len(inspect.getfullargspec(field.inverse).args) < 2
+                    ):
+                        field.inverse()
+                        rec.write(vals)
             else:
                 rec_id = (
                     model.with_context(
                         parent_dict=parent_dict,
                         lang="en_US",
                     )
                     .create(vals)
```

## odoo/addons/spec_driven_model/tests/purchase_order_lib.py

```diff
@@ -1,270 +1,205 @@
-# this file a relevant subset of a Python binding that is generated using
-# a code generator with the xsd schema PurchaseOrderSchema.xsd
-# for instance with GenerateDS one would do:
-# /usr/local/bin/generateDS --no-namespace-defs --no-dates --member-specs="list"\
-# --use-getter-setter="none" -o "purchase_order_lib.py" PurchaseOrderSchema.xsd
-# GenerateDS files are very verbose and don't enforce OCA standards, that is
-# why only the relevant subset has been copied here (without the XML import/export).
-# We also do that because we don't want spec_model_driven too much coupled
-# with a specific XSD databinding tool.
-
-
-class MemberSpec_(object):
-    def __init__(
-        self,
-        name="",
-        data_type="",
-        container=0,
-        optional=0,
-        child_attrs=None,
-        choice=None,
-    ):
-        self.name = name
-        self.data_type = data_type
-        self.container = container
-        self.child_attrs = child_attrs
-        self.choice = choice
-        self.optional = optional
-
-    def set_name(self, name):
-        self.name = name
-
-    def get_name(self):
-        return self.name
-
-    def set_data_type(self, data_type):
-        self.data_type = data_type
-
-    def get_data_type_chain(self):
-        return self.data_type
-
-    def get_data_type(self):
-        if isinstance(self.data_type, list):
-            if len(self.data_type) > 0:
-                return self.data_type[-1]
-            else:
-                return "xs:string"
-        else:
-            return self.data_type
-
-    def set_container(self, container):
-        self.container = container
-
-    def get_container(self):
-        return self.container
-
-    def set_child_attrs(self, child_attrs):
-        self.child_attrs = child_attrs
-
-    def get_child_attrs(self):
-        return self.child_attrs
-
-    def set_choice(self, choice):
-        self.choice = choice
-
-    def get_choice(self):
-        return self.choice
-
-    def set_optional(self, optional):
-        self.optional = optional
-
-    def get_optional(self):
-        return self.optional
-
-
-def _cast(typ, value):
-    if typ is None or value is None:
-        return value
-    return typ(value)
-
-
-class USAddress(object):
-    """Purchase order schema for Example.Microsoft.com."""
-
-    member_data_items_ = [
-        MemberSpec_("country", "xsd:NMTOKEN", 0, 1, {"use": "optional"}),
-        MemberSpec_(
-            "name", "xsd:string", 0, 0, {"name": "name", "type": "xsd:string"}, None
-        ),
-        MemberSpec_(
-            "street", "xsd:string", 0, 0, {"name": "street", "type": "xsd:string"}, None
-        ),
-        MemberSpec_(
-            "city", "xsd:string", 0, 0, {"name": "city", "type": "xsd:string"}, None
-        ),
-        MemberSpec_(
-            "state", "xsd:string", 0, 0, {"name": "state", "type": "xsd:string"}, None
-        ),
-        MemberSpec_(
-            "_zip", "xsd:decimal", 0, 0, {"name": "_zip", "type": "xsd:decimal"}, None
-        ),
-    ]
-
-    def __init__(
-        self,
-        country="US",
-        name=None,
-        street=None,
-        city=None,
-        state=None,
-        _zip=None,  # changed zip to _zip to make pylint happy
-        gds_collector_=None,
-        **kwargs_
-    ):
-        self.country = _cast(None, country)
-        self.country_nsprefix_ = None
-        self.name = name
-        self.name_nsprefix_ = None
-        self.street = street
-        self.street_nsprefix_ = None
-        self.city = city
-        self.city_nsprefix_ = None
-        self.state = state
-        self.state_nsprefix_ = None
-        self._zip = _zip
-        self.zip_nsprefix_ = None
-
-
-class Items(object):
-    member_data_items_ = [
-        MemberSpec_(
-            "item",
-            "ItemType",
-            1,
-            1,
-            {
-                "maxOccurs": "unbounded",
-                "minOccurs": "0",
-                "name": "item",
-                "type": "ItemType",
-            },
-            None,
-        ),
-    ]
-
-    def __init__(self, item=None, gds_collector_=None, **kwargs_):
-        if item is None:
-            self.item = []
-        else:
-            self.item = item
-        self.item_nsprefix_ = None
-
-
-class PurchaseOrderType(object):
-    member_data_items_ = [
-        MemberSpec_("orderDate", "xsd:date", 0, 1, {"use": "optional"}),
-        MemberSpec_("confirmDate", "xsd:date", 0, 0, {"use": "required"}),
-        MemberSpec_(
-            "shipTo", "USAddress", 0, 0, {"name": "shipTo", "type": "USAddress"}, None
-        ),
-        MemberSpec_(
-            "billTo", "USAddress", 0, 0, {"name": "billTo", "type": "USAddress"}, None
-        ),
-        MemberSpec_(
-            "comment",
-            "xsd:string",
-            0,
-            1,
-            {
-                "minOccurs": "0",
-                "name": "comment",
-                "ref": "comment",
-                "type": "xsd:string",
-            },
-            None,
-        ),
-        MemberSpec_("items", "Items", 0, 0, {"name": "items", "type": "Items"}, None),
-    ]
-
-    def __init__(
-        self,
-        orderDate=None,
-        confirmDate=None,
-        shipTo=None,
-        billTo=None,
-        comment=None,
-        items=None,
-        gds_collector_=None,
-        **kwargs_
-    ):
-        initvalue_ = orderDate
-        self.orderDate = initvalue_
-        self.confirmDate = confirmDate
-        self.shipTo = shipTo
-        self.shipTo_nsprefix_ = None
-        self.billTo = billTo
-        self.billTo_nsprefix_ = None
-        self.comment = comment
-        self.comment_nsprefix_ = None
-        self.items = items
-        self.items_nsprefix_ = None
-
-
-class ItemType(object):  # changed itemType to ItemType to make pylint happy
-    member_data_items_ = [
-        MemberSpec_("partNum", "tns:SKU", 0, 1, {"use": "optional"}),
-        MemberSpec_(
-            "productName",
-            "xsd:string",
-            0,
-            0,
-            {"name": "productName", "type": "xsd:string"},
-            None,
-        ),
-        MemberSpec_(
-            "quantity",
-            ["quantityType", "xsd:positiveInteger"],
-            0,
-            0,
-            {"name": "quantity", "type": "xsd:positiveInteger"},
-            None,
-        ),
-        MemberSpec_(
-            "USPrice",
-            "xsd:decimal",
-            0,
-            0,
-            {"name": "USPrice", "type": "xsd:decimal"},
-            None,
-        ),
-        MemberSpec_(
-            "comment",
-            "xsd:string",
-            0,
-            0,
-            {"name": "comment", "ref": "comment", "type": "xsd:string"},
-            None,
-        ),
-        MemberSpec_(
-            "shipDate",
-            "xsd:date",
-            0,
-            1,
-            {"minOccurs": "0", "name": "shipDate", "type": "xsd:date"},
-            None,
-        ),
-    ]
-
-    def __init__(
-        self,
-        partNum=None,
-        productName=None,
-        quantity=None,
-        USPrice=None,
-        comment=None,
-        shipDate=None,
-        gds_collector_=None,
-        **kwargs_
-    ):
-        self.partNum = _cast(None, partNum)
-        self.partNum_nsprefix_ = None
-        self.productName = productName
-        self.productName_nsprefix_ = None
-        self.quantity = quantity
-        self.quantity_nsprefix_ = None
-        self.USPrice = USPrice
-        self.USPrice_nsprefix_ = None
-        self.comment = comment
-        self.comment_nsprefix_ = None
-        self.shipDate = shipDate
-        self.shipDate_nsprefix_ = None
+# file generated using:
+# xsdata generate spec_driven_model/tests/PurchaseOrderSchema.xsd
+
+from dataclasses import dataclass, field
+from decimal import Decimal
+from typing import List, Optional
+from xsdata.models.datatype import XmlDate
+
+__NAMESPACE__ = "http://tempuri.org/PurchaseOrderSchema.xsd"
+
+
+@dataclass
+class Items:
+    item: List["Items.Item"] = field(
+        default_factory=list,
+        metadata={
+            "type": "Element",
+            "namespace": "http://tempuri.org/PurchaseOrderSchema.xsd",
+        }
+    )
+
+    @dataclass
+    class Item:
+        product_name: Optional[str] = field(
+            default=None,
+            metadata={
+                "name": "productName",
+                "type": "Element",
+                "namespace": "http://tempuri.org/PurchaseOrderSchema.xsd",
+                "required": True,
+            }
+        )
+        quantity: Optional[int] = field(
+            default=None,
+            metadata={
+                "type": "Element",
+                "namespace": "http://tempuri.org/PurchaseOrderSchema.xsd",
+                "required": True,
+                "min_inclusive": 1,
+                "max_exclusive": 100,
+            }
+        )
+        usprice: Optional[Decimal] = field(
+            default=None,
+            metadata={
+                "name": "USPrice",
+                "type": "Element",
+                "namespace": "http://tempuri.org/PurchaseOrderSchema.xsd",
+                "required": True,
+            }
+        )
+        comment: Optional[str] = field(
+            default=None,
+            metadata={
+                "type": "Element",
+                "namespace": "http://tempuri.org/PurchaseOrderSchema.xsd",
+                "required": True,
+            }
+        )
+        ship_date: Optional[XmlDate] = field(
+            default=None,
+            metadata={
+                "name": "shipDate",
+                "type": "Element",
+                "namespace": "http://tempuri.org/PurchaseOrderSchema.xsd",
+            }
+        )
+        part_num: Optional[str] = field(
+            default=None,
+            metadata={
+                "name": "partNum",
+                "type": "Attribute",
+                "pattern": r"\d{3}\w{3}",
+            }
+        )
+
+
+@dataclass
+class Usaddress:
+    """
+    Purchase order schema for Example.Microsoft.com.
+    """
+    class Meta:
+        name = "USAddress"
+
+    name: Optional[str] = field(
+        default=None,
+        metadata={
+            "type": "Element",
+            "namespace": "http://tempuri.org/PurchaseOrderSchema.xsd",
+            "required": True,
+        }
+    )
+    street: Optional[str] = field(
+        default=None,
+        metadata={
+            "type": "Element",
+            "namespace": "http://tempuri.org/PurchaseOrderSchema.xsd",
+            "required": True,
+        }
+    )
+    city: Optional[str] = field(
+        default=None,
+        metadata={
+            "type": "Element",
+            "namespace": "http://tempuri.org/PurchaseOrderSchema.xsd",
+            "required": True,
+        }
+    )
+    state: Optional[str] = field(
+        default=None,
+        metadata={
+            "type": "Element",
+            "namespace": "http://tempuri.org/PurchaseOrderSchema.xsd",
+            "required": True,
+        }
+    )
+    zip: Optional[Decimal] = field(
+        default=None,
+        metadata={
+            "type": "Element",
+            "namespace": "http://tempuri.org/PurchaseOrderSchema.xsd",
+            "required": True,
+        }
+    )
+    country: str = field(
+        init=False,
+        default="US",
+        metadata={
+            "type": "Attribute",
+        }
+    )
+
+
+@dataclass
+class Comment:
+    class Meta:
+        name = "comment"
+        namespace = "http://tempuri.org/PurchaseOrderSchema.xsd"
+
+    value: str = field(
+        default="",
+        metadata={
+            "required": True,
+        }
+    )
+
+
+@dataclass
+class PurchaseOrderType:
+    ship_to: Optional[Usaddress] = field(
+        default=None,
+        metadata={
+            "name": "shipTo",
+            "type": "Element",
+            "namespace": "http://tempuri.org/PurchaseOrderSchema.xsd",
+            "required": True,
+        }
+    )
+    bill_to: Optional[Usaddress] = field(
+        default=None,
+        metadata={
+            "name": "billTo",
+            "type": "Element",
+            "namespace": "http://tempuri.org/PurchaseOrderSchema.xsd",
+            "required": True,
+        }
+    )
+    comment: Optional[str] = field(
+        default=None,
+        metadata={
+            "type": "Element",
+            "namespace": "http://tempuri.org/PurchaseOrderSchema.xsd",
+        }
+    )
+    items: Optional[Items] = field(
+        default=None,
+        metadata={
+            "type": "Element",
+            "namespace": "http://tempuri.org/PurchaseOrderSchema.xsd",
+            "required": True,
+        }
+    )
+    order_date: Optional[XmlDate] = field(
+        default=None,
+        metadata={
+            "name": "orderDate",
+            "type": "Attribute",
+        }
+    )
+    confirm_date: Optional[XmlDate] = field(
+        default=None,
+        metadata={
+            "name": "confirmDate",
+            "type": "Attribute",
+            "required": True,
+        }
+    )
+
+
+@dataclass
+class PurchaseOrder(PurchaseOrderType):
+    class Meta:
+        name = "purchaseOrder"
+        namespace = "http://tempuri.org/PurchaseOrderSchema.xsd"
```

## odoo/addons/spec_driven_model/tests/spec_poxsd.py

```diff
@@ -1,119 +1,149 @@
-# Copyright 2021 Akretion - Raphael Valyi <raphael.valyi@akretion.com>
+# Copyright 2022 Akretion - Raphaël Valyi <raphael.valyi@akretion.com>
 # License LGPL-3.0 or later (https://www.gnu.org/licenses/lgpl-3.0.en.html).
-# Generated Sun Mar 21 09:03:49 2021 by https://github.com/akretion/generateds-odoo
-# and generateDS.py.
-# Python 3.8.5 (default, Jul 28 2020, 12:59:40)  [GCC 9.3.0]
+# Generated by https://github.com/akretion/xsdata-odoo
 #
 import textwrap
 from odoo import fields, models
 
-
-class DanglingModelExample(models.AbstractModel):
-    """
-    All the code in this file is generated according to the header command
-    from the PurchaseOrderSchema.xsd file,
-    except this class which was hand written to serve as an example of
-    spec mixin that would not be injected in any Odoo model and would
-    eventually need to be turned concrete by the spec_model_driven_hook.
-    """
-    _name = 'poxsd.10.dangling_model'
-    _description = 'dangling model example'
-    _inherit = 'spec.mixin.poxsd'
-
-    name = fields.Char()
+__NAMESPACE__ = "http://tempuri.org/PurchaseOrderSchema.xsd"
 
 
 class Items(models.AbstractModel):
-    _description = 'items'
-    _name = 'poxsd.10.items'
-    _inherit = 'spec.mixin.poxsd'
-    _generateds_type = 'Items'
-
-    poxsd10_item = fields.One2many(
-        "poxsd.10.item",
-        "poxsd10_item_Items_id",
+    _description = "Items"
+    _name = "poxsd.10.items"
+    _inherit = "spec.mixin.poxsd"
+    _binding_type = "Items"
+
+    
+    poxsd10_item = fields.One2many("poxsd.10.item", "poxsd10_item_Items_id", 
         string="item"
     )
 
 
-class PurchaseOrder(models.AbstractModel):
-    _description = 'purchaseorder'
-    _name = 'poxsd.10.purchaseorder'
-    _inherit = 'spec.mixin.poxsd'
-    _generateds_type = 'PurchaseOrderType'
-
-    poxsd10_orderDate = fields.Date(
-        string="orderDate",
-        xsd_type="date")
-    poxsd10_confirmDate = fields.Date(
-        string="confirmDate", xsd_required=True,
-        xsd_type="date")
-    poxsd10_shipTo = fields.Many2one(
-        "poxsd.10.usaddress",
-        string="shipTo", xsd_required=True)
-    poxsd10_billTo = fields.Many2one(
-        "poxsd.10.usaddress",
-        string="billTo", xsd_required=True)
-    poxsd10_comment = fields.Char(
-        string="comment",
-        xsd_type="string")
-    poxsd10_items = fields.Many2one(
-        "poxsd.10.items",
-        string="items", xsd_required=True)
+class Item(models.AbstractModel):
+    _description = "item"
+    _name = "poxsd.10.item"
+    _inherit = "spec.mixin.poxsd"
+    _binding_type = "Items.Item"
+
+    poxsd10_item_Items_id = fields.Many2one(
+        comodel_name="poxsd.10.items",
+        xsd_implicit=True,
+        ondelete="cascade"
+    )
+    poxsd10_productName = fields.Float(
+        xsd_required=True,
+        string="productName"
+    )
+    poxsd10_quantity = fields.Integer(
+        xsd_required=True,
+        string="quantity"
+    )
+    poxsd10_USPrice = fields.Float(
+        xsd_type="xsd:decimal",
+        xsd_required=True,
+        string="USPrice"
+    )
+    poxsd10_comment = fields.Float(
+        xsd_required=True,
+        string="comment"
+    )
+    poxsd10_shipDate = fields.Float(
+        string="shipDate"
+    )
+    poxsd10_partNum = fields.Float(
+        xsd_type="tns:SKU",
+        string="partNum"
+    )
 
 
-class USAddress(models.AbstractModel):
+class Usaddress(models.AbstractModel):
     "Purchase order schema for Example.Microsoft.com."
     _description = textwrap.dedent("    %s" % (__doc__,))
-    _name = 'poxsd.10.usaddress'
-    _inherit = 'spec.mixin.poxsd'
-    _generateds_type = 'USAddress'
-
-    poxsd10_country = fields.Char(
-        string="country",
-        xsd_type="NMTOKEN")
-    poxsd10_name = fields.Char(
-        string="name", xsd_required=True,
-        xsd_type="string")
-    poxsd10_street = fields.Char(
-        string="street", xsd_required=True,
-        xsd_type="string")
-    poxsd10_city = fields.Char(
-        string="city", xsd_required=True,
-        xsd_type="string")
-    poxsd10_state = fields.Char(
-        string="state", xsd_required=True,
-        xsd_type="string")
-    poxsd10_zip = fields.Monetary(
-        currency_field="brl_currency_id",
-        string="zip", xsd_required=True,
-        xsd_type="decimal")
+    _name = "poxsd.10.usaddress"
+    _inherit = "spec.mixin.poxsd"
+    _binding_type = "Usaddress"
+
+    
+    poxsd10_name = fields.Float(
+        xsd_required=True,
+        string="name"
+    )
+    poxsd10_street = fields.Float(
+        xsd_required=True,
+        string="street"
+    )
+    poxsd10_city = fields.Float(
+        xsd_required=True,
+        string="city"
+    )
+    poxsd10_state = fields.Float(
+        xsd_required=True,
+        string="state"
+    )
+    poxsd10_zip = fields.Float(
+        xsd_type="xsd:decimal",
+        xsd_required=True,
+        string="zip"
+    )
+    poxsd10_country = fields.Float(
+        xsd_type="xsd:NMTOKEN",
+        string="country"
+    )
 
 
-class Item(models.AbstractModel):
-    _description = 'item'
-    _name = 'poxsd.10.item'
-    _inherit = 'spec.mixin.poxsd'
-    _generateds_type = 'ItemType'
+class Comment(models.AbstractModel):
+    _description = "comment"
+    _name = "poxsd.10.comment"
+    _inherit = "spec.mixin.poxsd"
+    _binding_type = "Comment"
+
+    
+    poxsd10_value = fields.Float(
+        xsd_required=True,
+        string="value"
+    )
 
-    poxsd10_item_Items_id = fields.Many2one(
-        "poxsd.10.items")
-    poxsd10_partNum = fields.Char(
-        string="partNum",
-        xsd_type="string")
-    poxsd10_productName = fields.Char(
-        string="productName", xsd_required=True,
-        xsd_type="string")
-    poxsd10_quantity = fields.Integer(
-        string="quantity", xsd_required=True,
-        xsd_type="quantityType")
-    poxsd10_USPrice = fields.Monetary(
-        currency_field="brl_currency_id",
-        string="USPrice", xsd_required=True,
-        xsd_type="decimal")
-    poxsd10_comment = fields.Char(
-        string="comment", xsd_required=True,
-        xsd_type="string")
-    poxsd10_shipDate = fields.Date(
-        string="shipDate",
-        xsd_type="date")
+
+class PurchaseOrderType(models.AbstractModel):
+    _description = "PurchaseOrderType"
+    _name = "poxsd.10.purchaseordertype"
+    _inherit = "spec.mixin.poxsd"
+    _binding_type = "PurchaseOrderType"
+
+    
+    poxsd10_shipTo = fields.Many2one(
+        xsd_type="tns:USAddress",
+        xsd_required=True,
+        string="shipTo",
+        comodel_name="poxsd.10.usaddress"
+    )
+    poxsd10_billTo = fields.Many2one(
+        xsd_type="tns:USAddress",
+        xsd_required=True,
+        string="billTo",
+        comodel_name="poxsd.10.usaddress"
+    )
+    poxsd10_comment = fields.Float(
+        string="comment"
+    )
+    poxsd10_items = fields.Many2one(
+        xsd_type="tns:Items",
+        xsd_required=True,
+        string="items",
+        comodel_name="poxsd.10.items"
+    )
+    poxsd10_orderDate = fields.Float(
+        string="orderDate"
+    )
+    poxsd10_confirmDate = fields.Float(
+        xsd_required=True,
+        string="confirmDate"
+    )
+
+
+class PurchaseOrder(models.AbstractModel):
+    _description = "purchaseOrder"
+    _name = "poxsd.10.purchaseorder"
+    _inherit = "spec.mixin.poxsd"
+    _binding_type = "PurchaseOrder"
```

### encoding

```diff
@@ -1 +1 @@
-us-ascii
+utf-8
```

## odoo/addons/spec_driven_model/tests/spec_purchase.py

```diff
@@ -36,17 +36,17 @@
     We use StackedModel to ensure the m2o poxsd10_items field
     from poxsd.10.purchaseorder get its content (the Items class
     with the poxsd10_item o2m field included inside PurchaseOrder).
     This poxsd10_item is then related to the purchase.order order_id o2m field.
     """
 
     _name = "fake.purchase.order"
-    _inherit = ["fake.purchase.order", "poxsd.10.purchaseorder"]
+    _inherit = ["fake.purchase.order", "poxsd.10.purchaseordertype"]
     _spec_module = "odoo.addons.spec_driven_model.tests.spec_poxsd"
-    _stacked = "poxsd.10.purchaseorder"
+    _stacked = "poxsd.10.purchaseordertype"
     _stacking_points = {}
     _poxsd10_spec_module_classes = None
 
     poxsd10_orderDate = fields.Date(compute="_compute_date")
     poxsd10_confirmDate = fields.Date(related="date_approve")
     poxsd10_shipTo = fields.Many2one(related="dest_address_id")
     poxsd10_billTo = fields.Many2one(related="partner_id")
```

## odoo/addons/spec_driven_model/tests/test_spec_model.py

```diff
@@ -27,17 +27,17 @@
             PurchaseOrderLine as FakePurchaseOrderLine,
         )
 
         cls.loader.update_registry((FakePurchaseOrder, FakePurchaseOrderLine))
 
         # import generated spec mixins
         from .fake_mixin import PoXsdMixin
-        from .spec_poxsd import Item, Items, PurchaseOrder, USAddress
+        from .spec_poxsd import Item, Items, PurchaseOrderType, Usaddress
 
-        cls.loader.update_registry((PoXsdMixin, Item, Items, USAddress, PurchaseOrder))
+        cls.loader.update_registry((PoXsdMixin, Item, Items, Usaddress, PurchaseOrderType))
 
         # inject the mixins into existing Odoo models
         from .spec_purchase import (
             PurchaseOrder as PurchaseOrder2,
             PurchaseOrderLine,
             ResPartner,
         )
@@ -54,15 +54,17 @@
     def test_loading_hook(self):
         remaining_spec_models = get_remaining_spec_models(
             self.env.cr,
             self.env.registry,
             "spec_driven_model",
             "odoo.addons.spec_driven_model.tests.spec_poxsd",
         )
-        self.assertEqual(remaining_spec_models, {"poxsd.10.dangling_model"})
+        self.assertEqual(remaining_spec_models,
+                {"poxsd.10.purchaseorder", "poxsd.10.comment"}
+        )
 
     def test_spec_models(self):
         self.assertTrue(
             set(self.env["res.partner"]._fields.keys()).issuperset(
                 set(self.env["poxsd.10.usaddress"]._fields.keys())
             )
         )
@@ -76,15 +78,15 @@
     def test_stacked_model(self):
         po_fields_or_stacking = set(self.env["fake.purchase.order"]._fields.keys())
         po_fields_or_stacking.update(
             set(self.env["fake.purchase.order"]._stacking_points.keys())
         )
         self.assertTrue(
             po_fields_or_stacking.issuperset(
-                set(self.env["poxsd.10.purchaseorder"]._fields.keys())
+                set(self.env["poxsd.10.purchaseordertype"]._fields.keys())
             )
         )
         self.assertEqual(
             list(self.env["fake.purchase.order"]._stacking_points.keys()),
             ["poxsd10_items"],
         )
 
@@ -121,18 +123,18 @@
                 "order_id": po.id,
             }
         )
 
         # 2nd we serialize it into a binding object:
         # (that could be further XML serialized)
         po_binding = po._build_generateds()
-        self.assertEqual(po_binding.billTo.name, "Wood Corner")
-        self.assertEqual(po_binding.items.item[0].productName, "Some product desc")
+        self.assertEqual(po_binding.bill_to.name, "Wood Corner")
+        self.assertEqual(po_binding.items.item[0].product_name, "Some product desc")
         self.assertEqual(po_binding.items.item[0].quantity, 42)
-        self.assertEqual(po_binding.items.item[0].USPrice, "13")  # FIXME
+        self.assertEqual(po_binding.items.item[0].usprice, "13")  # FIXME
 
         # 3rd we import an Odoo PO from this binding object
         # first we will do a dry run import:
         imported_po_dry_run = self.env["fake.purchase.order"].build_from_binding(
             po_binding, dry_run=True
         )
         assert isinstance(imported_po_dry_run.id, NewId)
```

## Comparing `odoo14_addon_spec_driven_model-14.0.4.0.0.dist-info/METADATA` & `odoo14_addon_spec_driven_model-14.0.5.0.0.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-spec-driven-model
-Version: 14.0.4.0.0
+Version: 14.0.5.0.0
 Summary: Tools for specifications driven mixins (from xsd for instance)
 Home-page: https://github.com/OCA/l10n-brazil
 Author: Akretion,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: LGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo14_addon_spec_driven_model-14.0.4.0.0.dist-info/RECORD` & `odoo14_addon_spec_driven_model-14.0.5.0.0.dist-info/RECORD`

 * *Files 6% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 odoo/addons/spec_driven_model/README.rst,sha256=94eVOFmCT584ZX5TU3w8I6FsGcAp6RuG9yZxQy_A2x8,7608
 odoo/addons/spec_driven_model/__init__.py,sha256=X9EJGOE2GtZbS0G82PtSXmWSZ_R8jEM0rlJTDliQjp4,21
-odoo/addons/spec_driven_model/__manifest__.py,sha256=tKNTpxsgj_RUVXVKJUjoxCTZNzOc_D1fLd3s3m_VoLY,504
+odoo/addons/spec_driven_model/__manifest__.py,sha256=88HAqJFW3vJaE43hqzEysECZGq5jzTfiJm_15bdnawM,504
 odoo/addons/spec_driven_model/hooks.py,sha256=yvY4LfQ091lYz-uiDfxeiQX2Sjc8njRORnf0HxMvcfA,6146
 odoo/addons/spec_driven_model/i18n/pt_BR.po,sha256=7PGKTyIPQeF9ByBskdvpVRrqnnpkhrDW9b8GM_0GAW0,1378
 odoo/addons/spec_driven_model/i18n/spec_driven_model.pot,sha256=pG-YGto9xSPmBfFSlUzY2I6brA4CMBL7EJFxRZ6-xNo,1103
 odoo/addons/spec_driven_model/models/__init__.py,sha256=7fFGNO5Mfz-7XMzMZFbA4ERH4ucBH5pDiUOvjUA1f-M,130
-odoo/addons/spec_driven_model/models/spec_export.py,sha256=i7URNpS4PQOGwdNmfR_SBTFh7MS3vMjgphFhkntuAzQ,9551
-odoo/addons/spec_driven_model/models/spec_import.py,sha256=XT-Np5fNSUIoIINCYxMwXLtbcQZJ3qfM1Ckudp_G6sM,12090
+odoo/addons/spec_driven_model/models/spec_export.py,sha256=N5xhwoPP0wP6ZfKjDxdkz8fY4GVAO8UnelIrXp2w2mg,10281
+odoo/addons/spec_driven_model/models/spec_import.py,sha256=3nr-rFLZnHW3B6n8PDYxwAScS4WcacrtY8ccDoI16Y8,13384
 odoo/addons/spec_driven_model/models/spec_mixin.py,sha256=AD49FnRN4pPKmJrifjGPpUJeg_PuhnRzgkW15okh7aQ,1051
 odoo/addons/spec_driven_model/models/spec_models.py,sha256=Oc8UD-P9eR6SFj5DpcbLNU8W477C8WjK9k6hSW0wyCs,14407
 odoo/addons/spec_driven_model/models/spec_view.py,sha256=AWlwSJGwBBSO7ecy2MizEkY2QKzsBo8m27CDATOgWoQ,13996
 odoo/addons/spec_driven_model/readme/CONFIGURE.rst,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 odoo/addons/spec_driven_model/readme/CONTRIBUTORS.rst,sha256=MPCw315vYCm4yC0TpBxAkLHm_wnQNPl6cG-1-KtnBVs,191
 odoo/addons/spec_driven_model/readme/DESCRIPTION.rst,sha256=ZNjZjSPIBusPdvbt5f3LIXQTn-MT5KLzqXRkV0oO0sQ,4284
 odoo/addons/spec_driven_model/readme/HISTORY.rst,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
@@ -19,15 +19,15 @@
 odoo/addons/spec_driven_model/readme/USAGE.rst,sha256=roRZIQdR48Y8Ll9-vXsm4dNMV250UI_esJ0MU-N4vic,240
 odoo/addons/spec_driven_model/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/spec_driven_model/static/description/index.html,sha256=p4gx0JqqVHqvkPdzlUvG25FpISTY1VPhM5RKNNu9mAU,17610
 odoo/addons/spec_driven_model/tests/PurchaseOrderSchema.xsd,sha256=IAIQKwVF5c_3IB3D_ugZL6h2FICH4ehxEKM9Od42NhA,2466
 odoo/addons/spec_driven_model/tests/__init__.py,sha256=RyDXekxpioKc56nEritit2cLjmvSranFs5MQ9QeJdtM,30
 odoo/addons/spec_driven_model/tests/fake_mixin.py,sha256=q0Pus2XaWeyNnOLX9HoGXtJc2ziu6LJmR_dIgAVlZKA,1146
 odoo/addons/spec_driven_model/tests/fake_odoo_purchase.py,sha256=PRDIYO0JysZ25FXEyHzHAChQpuJkmmGe4Fd8sWVYu2U,2535
-odoo/addons/spec_driven_model/tests/purchase_order_lib.py,sha256=EpQpq_HJl-nXyiIfzjYo771GoQC2GncrSkOvdibm5VE,7419
-odoo/addons/spec_driven_model/tests/spec_poxsd.py,sha256=FCtY0-93UL_RuT0wroOUqlcsudPDO6tYK3UJba85jXw,3805
-odoo/addons/spec_driven_model/tests/spec_purchase.py,sha256=l3TRtKrPhG-rRmynEsqhZXcGNlkGW-JJdk7GqIgHHio,2260
-odoo/addons/spec_driven_model/tests/test_spec_model.py,sha256=xCGevJ5UrnJXLUrZp7KH0LodjkOjBEB0UYly5DAJmkc,5325
-odoo14_addon_spec_driven_model-14.0.4.0.0.dist-info/METADATA,sha256=pTO1Fqusciz8mebgJl7qoOAZ77qwMwzJmmkNIxAkL5c,8234
-odoo14_addon_spec_driven_model-14.0.4.0.0.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo14_addon_spec_driven_model-14.0.4.0.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_spec_driven_model-14.0.4.0.0.dist-info/RECORD,,
+odoo/addons/spec_driven_model/tests/purchase_order_lib.py,sha256=oTA64q-ijXAKPnqr16m0cRE48zhu_sG-HIQCrnlZ8EE,5391
+odoo/addons/spec_driven_model/tests/spec_poxsd.py,sha256=OKZCVNFbtrf56X0Dw9QF0RCGbppMT3e7PPukkQowUok,3704
+odoo/addons/spec_driven_model/tests/spec_purchase.py,sha256=QUOe3T4vIZgEKQdze2GKotIRo3eJlJ_M_baKjsb9AJ4,2268
+odoo/addons/spec_driven_model/tests/test_spec_model.py,sha256=aNfeVUs3Hd-nZHReBRmcidzI-uP35A6act2pE2fCFnM,5383
+odoo14_addon_spec_driven_model-14.0.5.0.0.dist-info/METADATA,sha256=3SYyRFyiCqGuX0GNcL5mju-OL0YaPQqXD9gwzIQz7xo,8234
+odoo14_addon_spec_driven_model-14.0.5.0.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo14_addon_spec_driven_model-14.0.5.0.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_spec_driven_model-14.0.5.0.0.dist-info/RECORD,,
```

